#### 零、
##### 1.
根据题目中CAPM模型，alpha策略指的是超额收益，也就是超过了市场基准的回报，所以这个策略是指通过因子模型获取市场超额回报的策略。

##### 2.
挖因子指的是通过数据分析和统计方法发现能够解释资产价格变动与收益或预测未来回报的因素与变量.

##### 3.
风格因子指的是通过分析资产价格变动与收益或预测未来回报的风格因素，例如价值、成长、动量等。它们反映的是资产价格变动中系统性的、普遍存在的模式和趋势。

#### 一、
##### 1.
P(A) 为患病概率，即 P(A)=0.001，P(B∣A) 为患病且检测阳性的概率（即测试的灵敏度），即 P(B∣A)=0.98。假阳性率位P(B∣A )=0.01
根据贝叶斯定理：P(A∣B)= P(B∣A)⋅P(A)/P(B) = 0.0893

##### 2.
我们要计算的 $ P(A|B_n) $ ，即已知 $ B_n $ 发生的情况下，$ A $ 发生的概率。根据贝叶斯定理，我们有：

$$
P(A|B_n) = \frac{P(B_n|A) \cdot P(A)}{P(B_n)}
$$
​
将数据代入，得到通项公式为：
\[ P(A|B_n) = \frac{(0.98)^n \cdot 0.001}{(0.98)^n \cdot 0.001 + (0.01)^n \cdot 0.999} \]


#### 二、
##### 1. 均值-方差优化和超额收益率预测
在传统多因子理论框架下，组合权重 \(\mathbf{w}\) 由凸优化产生。假设有 \(N\) 只股票的投资组合，其预期超额收益率 \(\mathbf{r_e}\) 可以表示为：
\[ \mathbf{r_e} = \mathbf{E}(r - r_f) \]
其中 \(\mathbf{E}(r - r_f)\) 是股票预期超额收益， \(r_f\) 是无风险收益率。

##### 2. SHAP算法的线性解释
假设我们有一个预测模型 \(\hat{r}_i\) 来预测每只股票的超额收益率。SHAP算法可以将投资组合的总收益 \(R_p\) 归因到个股收益、收益率型、底层因子层面。SHAP值 \( \phi_j \) 可以表示特征 \( j \) 对预测值的贡献。

##### 3. 计算公式
#### a. 个股收益层面的归因
对于每只股票 \(i\)，其预期超额收益率 \(\hat{r}_i\) 可以由模型产生：
\[ \hat{r}_i = f(x_i) \]
其中 \(x_i\) 是股票 \(i\) 的特征向量。

使用SHAP算法，我们可以计算每只股票的SHAP值 \( \phi_{ij} \)：
\[ \hat{r}_i = \phi_{i0} + \sum_{j=1}^{M} \phi_{ij} \]
其中 \(\phi_{ij}\) 表示特征 \( j \) 对股票 \( i \) 的预期收益的贡献， \(M\) 是特征的数量。

#### b. 投资组合收益层面的归因
投资组合的总收益 \(R_p\) 可以表示为各个个股收益的加权和：
\[ R_p = \sum_{i=1}^{N} w_i \hat{r}_i \]

将每只股票的SHAP值代入：
\[ R_p = \sum_{i=1}^{N} w_i \left( \phi_{i0} + \sum_{j=1}^{M} \phi_{ij} \right) \]

#### c. 底层因子层面的归因
我们可以进一步将总收益分解到底层因子层面：
\[ R_p = \sum_{i=1}^{N} w_i \phi_{i0} + \sum_{j=1}^{M} \sum_{i=1}^{N} w_i \phi_{ij} \]

其中，第一项 \(\sum_{i=1}^{N} w_i \phi_{i0}\) 表示基线收益，第二项 \(\sum_{j=1}^{M} \sum_{i=1}^{N} w_i \phi_{ij}\) 表示特征 \(j\) 对投资组合总收益的贡献。

